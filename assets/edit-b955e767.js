import{r as l,a as p,j as e,b as y}from"./index-acfe17ae.js";import{d as w}from"./dexie-react-hooks-959d3e40.js";import{d as x}from"./db-363a45a4.js";import{I as S}from"./Input-ca2a491a.js";function I({post:a}){const[s,i]=l.useState(a.heading),[c,g]=l.useState(a.text),[r,h]=l.useState(a.img),[u,n]=l.useState(""),[f,j]=l.useState(""),{postId:o}=p();function v(t){const m=t.target.files[0],d=new FileReader;d.addEventListener("load",()=>{h({url:d.result})},!1),m&&d.readAsDataURL(m)}async function b(){try{await x.posts.update(Number(o),{heading:s,text:c,editedAt:Date.now().toString(),img:r}).then(t=>{t?(n(`Post "${s}" successfully updated. Post id ${o}`),y("/")):n(`Nothing happend with ${o}`)})}catch(t){n(`Failed to update ${s}: ${t}`)}}function N(t){t.preventDefault(),b()}return e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-12 gap-1 mb-3",children:[u&&e.jsx("h3",{children:u}),e.jsxs("div",{className:"col-span-12 md:col-span-8 lg:col-span-6",children:[e.jsx("h3",{className:"text-2xl mt-3 mb-5",children:"Any updates?"}),r&&e.jsx("figure",{children:e.jsx("img",{id:"preview",src:r.url,alt:"Card cap",className:"card-img-top"})}),e.jsxs("form",{onSubmit:N,children:[e.jsx("div",{className:"mb-3",children:e.jsx(S,{placeholder:"Title",value:s,onChange:t=>{i(t.target.value)}})}),e.jsx("div",{className:"mb-3",children:e.jsx("textarea",{placeholder:"Write your text...",rows:5,className:"textarea w-full text-lg",value:c,onChange:t=>{g(t.target.value)}})}),e.jsx("div",{className:"mb-3",children:e.jsx("textarea",{placeholder:"Hashtags",rows:2,className:"textarea text-lg w-full",value:f,onChange:t=>{j(t.target.value)}})}),e.jsx("div",{className:"input-group mb-3",children:e.jsx("input",{id:"uploadImageInput",type:"file",title:"Add image",className:`block w-full text-sm text-slate-500
                file:mr-4 file:py-2 file:px-4
                file:rounded-full file:border-0
                file:text-sm file:font-semibold
                file:bg-violet-50 file:text-slate-500
                hover:file:bg-violet-100 cursor-pointer mt-2`,onChange:v})}),e.jsxs("div",{children:[e.jsx("i",{className:"glyphicon glyphicon-ok"}),e.jsx("input",{title:"Update post",type:"submit",className:"btn btn-primary btn-outline mt-5",value:"Update it"})]})]})]})]})})}function $(){const{postId:a}=p(),s=w.useLiveQuery(()=>x.posts.filter(({id:i})=>i===Number(a)).toArray());return s?e.jsx(I,{post:s[0]}):null}export{I as EditPost,$ as default};
