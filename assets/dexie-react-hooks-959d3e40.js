import{g as x,r as P,c as R}from"./index-acfe17ae.js";import{a as j}from"./db-363a45a4.js";var b={exports:{}};const D=x(j);(function(T,p){(function(a,f){f(p,D,P)})(R,function(a,f,w){function y(e){return e&&typeof e=="object"&&"default"in e?e:{default:e}}var l=y(w);function c(e,s,t){var u,d;typeof e=="function"?(u=s||[],d=t):(u=[],d=s);var n=l.default.useRef({hasResult:!1,result:d,error:null}),m=l.default.useReducer(function(r){return r+1},0);m[0];var v=m[1],E=l.default.useMemo(function(){var r=typeof e=="function"?e():e;if(!r||typeof r.subscribe!="function")throw e===r?new TypeError("Given argument to useObservable() was neither a valid observable nor a function."):new TypeError("Observable factory given to useObservable() did not return a valid observable.");if(!n.current.hasResult&&typeof window<"u"&&(typeof r.hasValue!="function"||r.hasValue()))if(typeof r.getValue=="function")n.current.result=r.getValue(),n.current.hasResult=!0;else{var i=r.subscribe(function(o){n.current.result=o,n.current.hasResult=!0});typeof i=="function"?i():i.unsubscribe()}return r},u);if(l.default.useDebugValue(n.current.result),l.default.useEffect(function(){var r=E.subscribe(function(i){var o=n.current;(o.error!==null||o.result!==i)&&(o.error=null,o.result=i,o.hasResult=!0,v())},function(i){var o=n.current;o.error!==i&&(o.error=i,v())});return typeof r=="function"?r:r.unsubscribe.bind(r)},u),n.current.error)throw n.current.error;return n.current.result}function g(e,s,t){return c(function(){return f.liveQuery(e)},s||[],t)}function h(e,s,t){if(!e)throw new TypeError("Invalid arguments to usePermissions(): undefined or null");var u;if(arguments.length>=3){if(!("transaction"in e))throw new TypeError("Invalid arguments to usePermission(db, table, obj): 1st arg must be a Dexie instance");if(typeof s!="string")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 2nd arg must be string");if(!t||typeof t!="object")throw new TypeError("Invalid arguments to usePermission(db, table, obj): 3rd arg must be an object");u=e}else{if(e instanceof f.Dexie)throw new TypeError("Invalid arguments to usePermission(db, table, obj): Missing table and obj arguments.");if(typeof e.table=="function"&&typeof e.db=="object")u=e.db,t=e,s=e.table();else throw new TypeError("Invalid arguments to usePermissions(). Expected usePermissions(entity: DexieCloudEntity) or usePermissions(db: Dexie, table: string, obj: DexieCloudObject)")}if(!("cloud"in u))throw new Error("usePermissions() is only for Dexie Cloud but there's no dexie-cloud-addon active in given db.");if(!("permissions"in u.cloud))throw new Error("usePermissions() requires a newer version of dexie-cloud-addon. Please upgrade it.");return c(function(){return u.cloud.permissions(t,s)},[t.realmId,t.owner,s])}a.useLiveQuery=g,a.useObservable=c,a.usePermissions=h,Object.defineProperty(a,"__esModule",{value:!0})})})(b,b.exports);var _=b.exports;export{_ as d};
