import{r as X,j as c,L as D,O as pe}from"./index-acfe17ae.js";import{G as _e}from"./index-3e1ae751.js";const H={staleTTL:1e3*60,cacheKey:"gbFeaturesCache",backgroundSync:!0},d={fetch:globalThis.fetch?globalThis.fetch.bind(globalThis):void 0,SubtleCrypto:globalThis.crypto?globalThis.crypto.subtle:void 0,EventSource:globalThis.EventSource};try{globalThis.localStorage&&(d.localStorage=globalThis.localStorage)}catch{}const k=new Map;let U=!1;const _=new Map,y=new Map,K=new Map,ee=new Set;async function ve(r,e,t,s,n){const a=await Ee(r,s,e,t);n&&a&&await re(r,a)}function be(r){const[e]=R(r),t=k.get(e)||new Set;t.add(r),k.set(e,t)}function ye(r){k.forEach(e=>e.delete(r))}async function J(){try{if(!d.localStorage)return;await d.localStorage.setItem(H.cacheKey,JSON.stringify(Array.from(_.entries())))}catch{}}async function Ee(r,e,t,s){const[n]=R(r),a=new Date;await we();const i=_.get(n);return i&&!s&&(e||i.staleAt>a)?(i.staleAt<a?z(r):se(r),i.data):await Ae(z(r),t)}function R(r){const[e,t]=r.getApiInfo();return["".concat(e,"||").concat(t),e,t]}function Ae(r,e){return new Promise(t=>{let s=!1,n;const a=i=>{s||(s=!0,n&&clearTimeout(n),t(i||null))};e&&(n=setTimeout(()=>a(),e)),r.then(i=>a(i)).catch(()=>a())})}async function we(){if(!U){U=!0;try{if(d.localStorage){const r=await d.localStorage.getItem(H.cacheKey);if(r){const e=JSON.parse(r);e&&Array.isArray(e)&&e.forEach(t=>{let[s,n]=t;_.set(s,{...n,staleAt:new Date(n.staleAt)})})}}}catch{}}}function te(r,e){const t=e.dateUpdated||"",s=new Date(Date.now()+H.staleTTL),n=_.get(r);if(n&&t&&n.version===t){n.staleAt=s,J();return}_.set(r,{data:e,version:t,staleAt:s}),J();const a=k.get(r);a&&a.forEach(i=>re(i,e))}async function re(r,e){await(e.encryptedExperiments?r.setEncryptedExperiments(e.encryptedExperiments,void 0,d.SubtleCrypto):r.setExperiments(e.experiments||r.getExperiments())),await(e.encryptedFeatures?r.setEncryptedFeatures(e.encryptedFeatures,void 0,d.SubtleCrypto):r.setFeatures(e.features||r.getFeatures()))}async function z(r){const[e,t,s]=R(r),n=t+"/api/features/"+s;let a=y.get(e);return a||(a=d.fetch(n).then(i=>(i.headers.get("x-sse-support")==="enabled"&&ee.add(e),i.json())).then(i=>(te(e,i),se(r),y.delete(e),i)).catch(i=>(y.delete(e),Promise.resolve({}))),y.set(e,a)),await a}function se(r){const[e,t,s]=R(r);if(ee.has(e)&&d.EventSource){if(K.has(e))return;const n={src:null,cb:a=>{try{const i=JSON.parse(a.data);te(e,i),n.errors=0}catch{ne(n,t,s)}},errors:0};K.set(e,n),ie(n,t,s)}}function ne(r,e,t){if(r.errors++,r.errors>3||r.src&&r.src.readyState===2){const s=Math.pow(3,r.errors-3)*(1e3+Math.random()*1e3);Se(r),setTimeout(()=>{ie(r,e,t)},Math.min(s,3e5))}}function Se(r){r.src&&(r.src.onopen=null,r.src.onerror=null,r.src.close(),r.src=null)}function ie(r,e,t){r.src=new d.EventSource("".concat(e,"/sub/").concat(t)),r.src.addEventListener("features",r.cb),r.src.onerror=()=>{ne(r,e,t)},r.src.onopen=()=>{r.errors=0}}var ke=/^[a-zA-Z:_][a-zA-Z0-9:_.-]*$/,I={revert:function(){}},V=new Map,P=new Set;function Ve(r){return r==="html"?{childList:!0,subtree:!0,attributes:!0,characterData:!0}:{childList:!1,subtree:!1,attributes:!0,attributeFilter:[r]}}function F(r){var e=V.get(r);return e||(e={element:r,attributes:{}},V.set(r,e)),e}function O(r,e,t,s,n){var a=t(r),i={isDirty:!1,originalValue:a,virtualValue:a,mutations:[],el:r,observer:new MutationObserver(function(){var u=t(r);u!==i.virtualValue&&(i.originalValue=u,n(i))}),mutationRunner:n,setValue:s,getCurrentValue:t};return i.observer.observe(r,Ve(e)),i}function x(r,e){var t=e.getCurrentValue(e.el);e.virtualValue=r,r&&typeof r!="string"?(!t||r.parentNode!==t.parentNode||r.insertBeforeNode!==t.insertBeforeNode)&&(e.isDirty=!0,G()):r!==t&&(e.isDirty=!0,G())}function Re(r){var e=r.originalValue;r.mutations.forEach(function(t){return e=t.mutate(e)}),x(Ie(e),r)}function Fe(r){var e=new Set(r.originalValue.split(/\s+/).filter(Boolean));r.mutations.forEach(function(t){return t.mutate(e)}),x(Array.from(e).filter(Boolean).join(" "),r)}function Oe(r){var e=r.originalValue;r.mutations.forEach(function(t){return e=t.mutate(e)}),x(e,r)}function xe(r){var e=r.parentSelector,t=r.insertBeforeSelector,s=document.querySelector(e);if(!s)return null;var n=t?document.querySelector(t):null;return t&&!n?null:{parentNode:s,insertBeforeNode:n}}function Te(r){var e=r.originalValue;r.mutations.forEach(function(t){var s=t.mutate(),n=xe(s);e=n||e}),x(e,r)}var Ce=function(e){return e.innerHTML},Me=function(e,t){return e.innerHTML=t};function ae(r){var e=F(r);return e.html||(e.html=O(r,"html",Ce,Me,Re)),e.html}var Ne=function(e){return{parentNode:e.parentElement,insertBeforeNode:e.nextElementSibling}},Le=function(e,t){t.parentNode.insertBefore(e,t.insertBeforeNode)};function ue(r){var e=F(r);return e.position||(e.position=O(r,"position",Ne,Le,Te)),e.position}var je=function(e,t){return t?e.className=t:e.removeAttribute("class")},$e=function(e){return e.className};function oe(r){var e=F(r);return e.classes||(e.classes=O(r,"class",$e,je,Fe)),e.classes}var qe=function(e){return function(t){var s;return(s=t.getAttribute(e))!=null?s:null}},Be=function(e){return function(t,s){return s!==null?t.setAttribute(e,s):t.removeAttribute(e)}};function le(r,e){var t=F(r);return t.attributes[e]||(t.attributes[e]=O(r,e,qe(e),Be(e),Oe)),t.attributes[e]}function He(r,e){var t=V.get(r);if(t)if(e==="html"){var s,n;(s=t.html)==null||(n=s.observer)==null||n.disconnect(),delete t.html}else if(e==="class"){var a,i;(a=t.classes)==null||(i=a.observer)==null||i.disconnect(),delete t.classes}else if(e==="position"){var u,o;(u=t.position)==null||(o=u.observer)==null||o.disconnect(),delete t.position}else{var l,f,b;(l=t.attributes)==null||(f=l[e])==null||(b=f.observer)==null||b.disconnect(),delete t.attributes[e]}}var E;function Ie(r){return E||(E=document.createElement("div")),E.innerHTML=r,E.innerHTML}function A(r,e,t){if(t.isDirty){t.isDirty=!1;var s=t.virtualValue;t.mutations.length||He(r,e),t.setValue(r,s)}}var $=!1;function Pe(r,e){r.html&&A(e,"html",r.html),r.classes&&A(e,"class",r.classes),r.position&&A(e,"position",r.position),Object.keys(r.attributes).forEach(function(t){A(e,t,r.attributes[t])})}function De(){$=!1,V.forEach(Pe)}function G(){$||($=!0,requestAnimationFrame(De))}function Ue(r,e){var t=null;r.kind==="html"?t=ae(e):r.kind==="class"?t=oe(e):r.kind==="attribute"?t=le(e,r.attribute):r.kind==="position"&&(t=ue(e)),t&&(t.mutations.push(r),t.mutationRunner(t))}function ce(r,e){var t=null;if(r.kind==="html"?t=ae(e):r.kind==="class"?t=oe(e):r.kind==="attribute"?t=le(e,r.attribute):r.kind==="position"&&(t=ue(e)),!!t){var s=t.mutations.indexOf(r);s!==-1&&t.mutations.splice(s,1),t.mutationRunner(t)}}function fe(r){var e=new Set(r.elements),t=new Set,s=document.querySelectorAll(r.selector);s.forEach(function(n){t.add(n),e.has(n)||(r.elements.add(n),Ue(r,n))}),e.forEach(function(n){t.has(n)||(r.elements.delete(n),ce(r,n))})}function Ke(r){r.elements.forEach(function(e){return ce(r,e)}),r.elements.clear(),P.delete(r)}function Q(){P.forEach(fe)}var C;function Je(){typeof document>"u"||(C||(C=new MutationObserver(function(){Q()})),Q(),C.observe(document.documentElement,{childList:!0,subtree:!0,attributes:!1,characterData:!1}))}Je();function T(r){return typeof document>"u"?I:(P.add(r),fe(r),{revert:function(){Ke(r)}})}function q(r,e){return T({kind:"html",elements:new Set,mutate:e,selector:r})}function he(r,e){return T({kind:"position",elements:new Set,mutate:e,selector:r})}function m(r,e){return T({kind:"class",elements:new Set,mutate:e,selector:r})}function w(r,e,t){return ke.test(e)?e==="class"||e==="className"?m(r,function(s){var n=t(Array.from(s).join(" "));s.clear(),n&&n.split(/\s+/g).filter(Boolean).forEach(function(a){return s.add(a)})}):T({kind:"attribute",attribute:e,elements:new Set,mutate:t,selector:r}):I}function ze(r){var e=r.selector,t=r.action,s=r.value,n=r.attribute,a=r.parentSelector,i=r.insertBeforeSelector;if(n==="html"){if(t==="append")return q(e,function(u){return u+(s??"")});if(t==="set")return q(e,function(){return s??""})}else if(n==="class"){if(t==="append")return m(e,function(u){s&&u.add(s)});if(t==="remove")return m(e,function(u){s&&u.delete(s)});if(t==="set")return m(e,function(u){u.clear(),s&&u.add(s)})}else if(n==="position"){if(t==="set"&&a)return he(e,function(){return{insertBeforeSelector:i,parentSelector:a}})}else{if(t==="append")return w(e,n,function(u){return u!==null?u+(s??""):s??""});if(t==="set")return w(e,n,function(){return s??""});if(t==="remove")return w(e,n,function(){return null})}return I}var Ge={html:q,classes:m,attribute:w,position:he,declarative:ze};function M(r){let e=2166136261;const t=r.length;for(let s=0;s<t;s++)e^=r.charCodeAt(s),e+=(e<<1)+(e<<4)+(e<<7)+(e<<8)+(e<<24);return e>>>0}function S(r,e,t){return t===2?M(M(r+e)+"")%1e4/1e4:t===1?M(e+r)%1e3/1e3:null}function Qe(r){return r<=0?[]:new Array(r).fill(1/r)}function B(r,e){return r>=e[0]&&r<e[1]}function We(r,e){const t=S("__"+e[0],r,1);return t===null?!1:t>=e[1]&&t<e[2]}function Ze(r,e){for(let t=0;t<e.length;t++)if(B(r,e[t]))return t;return-1}function de(r){try{const e=r.replace(/([^\\])\//g,"$1\\/");return new RegExp(e)}catch(e){console.error(e);return}}function Ye(r,e){if(!e.length)return!1;let t=!1,s=!1;for(let n=0;n<e.length;n++){const a=tt(r,e[n].type,e[n].pattern);if(e[n].include===!1){if(a)return!1}else t=!0,a&&(s=!0)}return s||!t}function Xe(r,e,t){try{let s=e.replace(/[*.+?^${}()|[\]\\]/g,"\\$&").replace(/_____/g,".*");return t&&(s="\\/?"+s.replace(/(^\/|\/$)/g,"")+"\\/?"),new RegExp("^"+s+"$","i").test(r)}catch{return!1}}function et(r,e){try{const t=new URL(e.replace(/^([^:/?]*)\./i,"https://$1.").replace(/\*/g,"_____"),"https://_____"),s=[[r.host,t.host,!1],[r.pathname,t.pathname,!0]];return t.hash&&s.push([r.hash,t.hash,!1]),t.searchParams.forEach((n,a)=>{s.push([r.searchParams.get(a)||"",n,!1])}),!s.some(n=>!Xe(n[0],n[1],n[2]))}catch{return!1}}function tt(r,e,t){try{const s=new URL(r,"https://_");if(e==="regex"){const n=de(t);return n?n.test(s.href)||n.test(s.href.substring(s.origin.length)):!1}else if(e==="simple")return et(s,t);return!1}catch{return!1}}function rt(r,e,t){e=e===void 0?1:e,e<0?e=0:e>1&&(e=1);const s=Qe(r);t=t||s,t.length!==r&&(t=s);const n=t.reduce((i,u)=>u+i,0);(n<.99||n>1.01)&&(t=s);let a=0;return t.map(i=>{const u=a;return a+=i,[u,u+e*i]})}function st(r,e,t){if(!e)return null;const s=e.split("?")[1];if(!s)return null;const n=s.replace(/#.*/,"").split("&").map(a=>a.split("=",2)).filter(a=>{let[i]=a;return i===r}).map(a=>{let[,i]=a;return parseInt(i)});return n.length>0&&n[0]>=0&&n[0]<t?n[0]:null}function nt(r){try{return r()}catch(e){return console.error(e),!1}}const N=r=>Uint8Array.from(atob(r),e=>e.charCodeAt(0));async function W(r,e,t){if(e=e||"",t=t||globalThis.crypto&&globalThis.crypto.subtle,!t)throw new Error("No SubtleCrypto implementation found");try{const s=await t.importKey("raw",N(e),{name:"AES-CBC",length:128},!0,["encrypt","decrypt"]),[n,a]=r.split("."),i=await t.decrypt({name:"AES-CBC",iv:N(n)},s,N(a));return new TextDecoder().decode(i)}catch{throw new Error("Failed to decrypt")}}function h(r){const e=r.replace(/(^v|\+.*$)/g,"").split(/[-.]/);return e.length===3&&e.push("~"),e.map(t=>t.match(/^[0-9]+$/)?t.padStart(5," "):t).join("-")}const L={};function v(r,e){if("$or"in e)return Y(r,e.$or);if("$nor"in e)return!Y(r,e.$nor);if("$and"in e)return ct(r,e.$and);if("$not"in e)return!v(r,e.$not);for(const[t,s]of Object.entries(e))if(!p(s,it(r,t)))return!1;return!0}function it(r,e){const t=e.split(".");let s=r;for(let n=0;n<t.length;n++)if(s&&typeof s=="object"&&t[n]in s)s=s[t[n]];else return null;return s}function at(r){return L[r]||(L[r]=new RegExp(r.replace(/([^\\])\//g,"$1\\/"))),L[r]}function p(r,e){if(typeof r=="string")return e+""===r;if(typeof r=="number")return e*1===r;if(typeof r=="boolean")return!!e===r;if(r===null)return e===null;if(Array.isArray(r)||!ge(r))return JSON.stringify(e)===JSON.stringify(r);for(const t in r)if(!lt(t,e,r[t]))return!1;return!0}function ge(r){const e=Object.keys(r);return e.length>0&&e.filter(t=>t[0]==="$").length===e.length}function ut(r){if(r===null)return"null";if(Array.isArray(r))return"array";const e=typeof r;return["string","number","boolean","object","undefined"].includes(e)?e:"unknown"}function ot(r,e){if(!Array.isArray(r))return!1;const t=ge(e)?s=>p(e,s):s=>v(s,e);for(let s=0;s<r.length;s++)if(r[s]&&t(r[s]))return!0;return!1}function Z(r,e){return Array.isArray(r)?r.some(t=>e.includes(t)):e.includes(r)}function lt(r,e,t){switch(r){case"$veq":return h(e)===h(t);case"$vne":return h(e)!==h(t);case"$vgt":return h(e)>h(t);case"$vgte":return h(e)>=h(t);case"$vlt":return h(e)<h(t);case"$vlte":return h(e)<=h(t);case"$eq":return e===t;case"$ne":return e!==t;case"$lt":return e<t;case"$lte":return e<=t;case"$gt":return e>t;case"$gte":return e>=t;case"$exists":return t?e!==null:e===null;case"$in":return Array.isArray(t)?Z(e,t):!1;case"$nin":return Array.isArray(t)?!Z(e,t):!1;case"$not":return!p(t,e);case"$size":return Array.isArray(e)?p(t,e.length):!1;case"$elemMatch":return ot(e,t);case"$all":if(!Array.isArray(e))return!1;for(let s=0;s<t.length;s++){let n=!1;for(let a=0;a<e.length;a++)if(p(t[s],e[a])){n=!0;break}if(!n)return!1}return!0;case"$regex":try{return at(t).test(e)}catch{return!1}case"$type":return ut(e)===t;default:return console.error("Unknown operator: "+r),!1}}function Y(r,e){if(!e.length)return!0;for(let t=0;t<e.length;t++)if(v(r,e[t]))return!0;return!1}function ct(r,e){for(let t=0;t<e.length;t++)if(!v(r,e[t]))return!1;return!0}const g=typeof window<"u"&&typeof document<"u";class ft{constructor(e){e=e||{},this._ctx=this.context=e,this._renderer=null,this._trackedExperiments=new Set,this._trackedFeatures={},this.debug=!1,this._subscriptions=new Set,this._rtQueue=[],this._rtTimer=0,this.ready=!1,this._assigned=new Map,this._forcedFeatureValues=new Map,this._attributeOverrides={},this._activeAutoExperiments=new Map,e.features&&(this.ready=!0),g&&e.enableDevMode&&(window._growthbook=this,document.dispatchEvent(new Event("gbloaded"))),e.experiments&&(this.ready=!0,this._updateAllAutoExperiments()),e.clientKey&&this._refresh({},!0,!1)}async loadFeatures(e){await this._refresh(e,!0,!0),e&&e.autoRefresh&&be(this)}async refreshFeatures(e){await this._refresh(e,!1,!0)}getApiInfo(){return[(this._ctx.apiHost||"https://cdn.growthbook.io").replace(/\/*$/,""),this._ctx.clientKey||""]}async _refresh(e,t,s){if(e=e||{},!this._ctx.clientKey)throw new Error("Missing clientKey");await ve(this,e.timeout,e.skipCache||this._ctx.enableDevMode,t,s)}_render(){this._renderer&&this._renderer()}setFeatures(e){this._ctx.features=e,this.ready=!0,this._render()}async setEncryptedFeatures(e,t,s){const n=await W(e,t||this._ctx.decryptionKey,s);this.setFeatures(JSON.parse(n))}setExperiments(e){this._ctx.experiments=e,this.ready=!0,this._updateAllAutoExperiments()}async setEncryptedExperiments(e,t,s){const n=await W(e,t||this._ctx.decryptionKey,s);this.setExperiments(JSON.parse(n))}setAttributes(e){this._ctx.attributes=e,this._render(),this._updateAllAutoExperiments()}setAttributeOverrides(e){this._attributeOverrides=e,this._render(),this._updateAllAutoExperiments()}setForcedVariations(e){this._ctx.forcedVariations=e||{},this._render(),this._updateAllAutoExperiments()}setForcedFeatures(e){this._forcedFeatureValues=e,this._render()}setURL(e){this._ctx.url=e,this._updateAllAutoExperiments(!0)}getAttributes(){return{...this._ctx.attributes,...this._attributeOverrides}}getFeatures(){return this._ctx.features||{}}getExperiments(){return this._ctx.experiments||[]}subscribe(e){return this._subscriptions.add(e),()=>{this._subscriptions.delete(e)}}getAllResults(){return new Map(this._assigned)}destroy(){this._subscriptions.clear(),this._assigned.clear(),this._trackedExperiments.clear(),this._trackedFeatures={},this._rtQueue=[],this._rtTimer&&clearTimeout(this._rtTimer),ye(this),g&&window._growthbook===this&&delete window._growthbook,this._activeAutoExperiments.forEach(e=>{e.undo()}),this._activeAutoExperiments.clear()}setRenderer(e){this._renderer=e}forceVariation(e,t){this._ctx.forcedVariations=this._ctx.forcedVariations||{},this._ctx.forcedVariations[e]=t,this._render()}run(e){const t=this._run(e,null);return this._fireSubscriptions(e,t),t}triggerExperiment(e){if(!this._ctx.experiments)return null;const t=this._ctx.experiments.find(s=>s.key===e);return!t||!t.manual?null:this._runAutoExperiment(t,!0)}_runAutoExperiment(e,t,s){const n=e.key,a=this._activeAutoExperiments.get(n);if(e.manual&&!t&&!a)return null;const i=this.run(e),u=JSON.stringify(i.value);if(!s&&i.inExperiment&&a&&a.valueHash===u)return i;if(a&&this._undoActiveAutoExperiment(n),i.inExperiment){const o=this._applyDOMChanges(i.value);o&&this._activeAutoExperiments.set(e.key,{undo:o,valueHash:u})}return i}_undoActiveAutoExperiment(e){const t=this._activeAutoExperiments.get(e);t&&(t.undo(),this._activeAutoExperiments.delete(e))}_updateAllAutoExperiments(e){const t=this._ctx.experiments||[],s=new Set(t.map(n=>n.key));this._activeAutoExperiments.forEach((n,a)=>{s.has(a)||(n.undo(),this._activeAutoExperiments.delete(a))}),t.forEach(n=>{this._runAutoExperiment(n,!1,e)})}_fireSubscriptions(e,t){const s=e.key,n=this._assigned.get(s);(!n||n.result.inExperiment!==t.inExperiment||n.result.variationId!==t.variationId)&&(this._assigned.set(s,{experiment:e,result:t}),this._subscriptions.forEach(a=>{try{a(e,t)}catch(i){console.error(i)}}))}_trackFeatureUsage(e,t){if(t.source==="override")return;const s=JSON.stringify(t.value);if(this._trackedFeatures[e]!==s){if(this._trackedFeatures[e]=s,this._ctx.onFeatureUsage)try{this._ctx.onFeatureUsage(e,t)}catch{}!g||!window.fetch||(this._rtQueue.push({key:e,on:t.on}),this._rtTimer||(this._rtTimer=window.setTimeout(()=>{this._rtTimer=0;const n=[...this._rtQueue];this._rtQueue=[],this._ctx.realtimeKey&&window.fetch("https://rt.growthbook.io/?key=".concat(this._ctx.realtimeKey,"&events=").concat(encodeURIComponent(JSON.stringify(n))),{cache:"no-cache",mode:"no-cors"}).catch(()=>{})},this._ctx.realtimeInterval||2e3)))}}_getFeatureResult(e,t,s,n,a,i){const u={value:t,on:!!t,off:!t,source:s,ruleId:n||""};return a&&(u.experiment=a),i&&(u.experimentResult=i),this._trackFeatureUsage(e,u),u}isOn(e){return this.evalFeature(e).on}isOff(e){return this.evalFeature(e).off}getFeatureValue(e,t){const s=this.evalFeature(e).value;return s===null?t:s}feature(e){return this.evalFeature(e)}evalFeature(e){if(this._forcedFeatureValues.has(e))return this._getFeatureResult(e,this._forcedFeatureValues.get(e),"override");if(!this._ctx.features||!this._ctx.features[e])return this._getFeatureResult(e,null,"unknownFeature");const t=this._ctx.features[e];if(t.rules)for(const s of t.rules){if(s.condition&&!this._conditionPasses(s.condition)||s.filters&&this._isFilteredOut(s.filters))continue;if("force"in s){if(!this._isIncludedInRollout(s.seed||e,s.hashAttribute,s.range,s.coverage,s.hashVersion))continue;return s.tracks&&s.tracks.forEach(i=>{this._track(i.experiment,i.result)}),this._getFeatureResult(e,s.force,"force",s.id)}if(!s.variations)continue;const n={variations:s.variations,key:s.key||e};"coverage"in s&&(n.coverage=s.coverage),s.weights&&(n.weights=s.weights),s.hashAttribute&&(n.hashAttribute=s.hashAttribute),s.namespace&&(n.namespace=s.namespace),s.meta&&(n.meta=s.meta),s.ranges&&(n.ranges=s.ranges),s.name&&(n.name=s.name),s.phase&&(n.phase=s.phase),s.seed&&(n.seed=s.seed),s.hashVersion&&(n.hashVersion=s.hashVersion),s.filters&&(n.filters=s.filters);const a=this._run(n,e);if(this._fireSubscriptions(n,a),a.inExperiment&&!a.passthrough)return this._getFeatureResult(e,a.value,"experiment",s.id,n,a)}return this._getFeatureResult(e,t.defaultValue===void 0?null:t.defaultValue,"defaultValue")}_isIncludedInRollout(e,t,s,n,a){if(!s&&n===void 0)return!0;const{hashValue:i}=this._getHashAttribute(t);if(!i)return!1;const u=S(e,i,a||1);return u===null?!1:s?B(u,s):n!==void 0?u<=n:!0}_conditionPasses(e){return v(this.getAttributes(),e)}_isFilteredOut(e){return e.some(t=>{const{hashValue:s}=this._getHashAttribute(t.attribute);if(!s)return!0;const n=S(t.seed,s,t.hashVersion||2);return n===null?!0:!t.ranges.some(a=>B(n,a))})}_run(e,t){const s=e.key,n=e.variations.length;if(n<2)return this._getResult(e,-1,!1,t);if(this._ctx.enabled===!1)return this._getResult(e,-1,!1,t);e=this._mergeOverrides(e);const a=st(s,this._getContextUrl(),n);if(a!==null)return this._getResult(e,a,!1,t);if(this._ctx.forcedVariations&&s in this._ctx.forcedVariations){const b=this._ctx.forcedVariations[s];return this._getResult(e,b,!1,t)}if(e.status==="draft"||e.active===!1)return this._getResult(e,-1,!1,t);const{hashValue:i}=this._getHashAttribute(e.hashAttribute);if(!i)return this._getResult(e,-1,!1,t);if(e.filters){if(this._isFilteredOut(e.filters))return this._getResult(e,-1,!1,t)}else if(e.namespace&&!We(i,e.namespace))return this._getResult(e,-1,!1,t);if(e.include&&!nt(e.include))return this._getResult(e,-1,!1,t);if(e.condition&&!this._conditionPasses(e.condition))return this._getResult(e,-1,!1,t);if(e.groups&&!this._hasGroupOverlap(e.groups))return this._getResult(e,-1,!1,t);if(e.url&&!this._urlIsValid(e.url))return this._getResult(e,-1,!1,t);if(e.urlPatterns&&!Ye(this._getContextUrl(),e.urlPatterns))return this._getResult(e,-1,!1,t);const u=S(e.seed||s,i,e.hashVersion||1);if(u===null)return this._getResult(e,-1,!1,t);const o=e.ranges||rt(n,e.coverage===void 0?1:e.coverage,e.weights),l=Ze(u,o);if(l<0)return this._getResult(e,-1,!1,t);if("force"in e)return this._getResult(e,e.force===void 0?-1:e.force,!1,t);if(this._ctx.qaMode)return this._getResult(e,-1,!1,t);if(e.status==="stopped")return this._getResult(e,-1,!1,t);const f=this._getResult(e,l,!0,t,u);return this._track(e,f),f}log(e,t){this.debug&&(this._ctx.log?this._ctx.log(e,t):console.log(e,t))}_track(e,t){if(!this._ctx.trackingCallback)return;const s=e.key,n=t.hashAttribute+t.hashValue+s+t.variationId;if(!this._trackedExperiments.has(n)){this._trackedExperiments.add(n);try{this._ctx.trackingCallback(e,t)}catch(a){console.error(a)}}}_mergeOverrides(e){const t=e.key,s=this._ctx.overrides;return s&&s[t]&&(e=Object.assign({},e,s[t]),typeof e.url=="string"&&(e.url=de(e.url))),e}_getHashAttribute(e){const t=e||"id";let s="";return this._attributeOverrides[t]?s=this._attributeOverrides[t]:this._ctx.attributes?s=this._ctx.attributes[t]||"":this._ctx.user&&(s=this._ctx.user[t]||""),{hashAttribute:t,hashValue:s}}_getResult(e,t,s,n,a){let i=!0;(t<0||t>=e.variations.length)&&(t=0,i=!1);const{hashAttribute:u,hashValue:o}=this._getHashAttribute(e.hashAttribute),l=e.meta?e.meta[t]:{},f={key:l.key||""+t,featureId:n,inExperiment:i,hashUsed:s,variationId:t,value:e.variations[t],hashAttribute:u,hashValue:o};return l.name&&(f.name=l.name),a!==void 0&&(f.bucket=a),l.passthrough&&(f.passthrough=l.passthrough),f}_getContextUrl(){return this._ctx.url||(g?window.location.href:"")}_urlIsValid(e){const t=this._getContextUrl();if(!t)return!1;const s=t.replace(/^https?:\/\//,"").replace(/^[^/]*\//,"/");return!!(e.test(t)||e.test(s))}_hasGroupOverlap(e){const t=this._ctx.groups||{};for(let s=0;s<e.length;s++)if(t[e[s]])return!0;return!1}_applyDOMChanges(e){if(!g)return;const t=[];if(e.css){const s=document.createElement("style");s.innerHTML=e.css,document.head.appendChild(s),t.push(()=>s.remove())}if(e.js){const s=document.createElement("script");s.innerHTML=e.js,document.body.appendChild(s),t.push(()=>s.remove())}return e.domMutations&&e.domMutations.forEach(s=>{t.push(Ge.declarative(s).revert)}),()=>{t.forEach(s=>s())}}}var me={exports:{}};(function(r,e){function t(){var i=document.querySelector("[data-toggle-theme]");(function(u=localStorage.getItem("theme")){localStorage.getItem("theme")&&(document.documentElement.setAttribute("data-theme",u),i&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(o=>{o.classList.add(i.getAttribute("data-act-class"))}))})(),i&&[...document.querySelectorAll("[data-toggle-theme]")].forEach(u=>{u.addEventListener("click",function(){var o=u.getAttribute("data-toggle-theme");if(o){var l=o.split(",");document.documentElement.getAttribute("data-theme")==l[0]?l.length==1?(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem("theme")):(document.documentElement.setAttribute("data-theme",l[1]),localStorage.setItem("theme",l[1])):(document.documentElement.setAttribute("data-theme",l[0]),localStorage.setItem("theme",l[0]))}[...document.querySelectorAll("[data-toggle-theme]")].forEach(f=>{f.classList.toggle(this.getAttribute("data-act-class"))})})})}function s(){(function(i=localStorage.getItem("theme")){if(i!=null&&i!="")if(localStorage.getItem("theme")&&localStorage.getItem("theme")!=""){document.documentElement.setAttribute("data-theme",i);var u=document.querySelector("[data-set-theme='"+i.toString()+"']");u&&([...document.querySelectorAll("[data-set-theme]")].forEach(o=>{o.classList.remove(o.getAttribute("data-act-class"))}),u.getAttribute("data-act-class")&&u.classList.add(u.getAttribute("data-act-class")))}else{var u=document.querySelector("[data-set-theme='']");u.getAttribute("data-act-class")&&u.classList.add(u.getAttribute("data-act-class"))}})(),[...document.querySelectorAll("[data-set-theme]")].forEach(i=>{i.addEventListener("click",function(){document.documentElement.setAttribute("data-theme",this.getAttribute("data-set-theme")),localStorage.setItem("theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("[data-set-theme]")].forEach(u=>{u.classList.remove(u.getAttribute("data-act-class"))}),i.getAttribute("data-act-class")&&i.classList.add(i.getAttribute("data-act-class"))})})}function n(){(function(i=localStorage.getItem("theme")){if(localStorage.getItem("theme")){document.documentElement.setAttribute("data-theme",i);var u=document.querySelector("select[data-choose-theme] [value='"+i.toString()+"']");u&&[...document.querySelectorAll("select[data-choose-theme] [value='"+i.toString()+"']")].forEach(o=>{o.selected=!0})}})(),document.querySelector("select[data-choose-theme]")&&[...document.querySelectorAll("select[data-choose-theme]")].forEach(i=>{i.addEventListener("change",function(){document.documentElement.setAttribute("data-theme",this.value),localStorage.setItem("theme",document.documentElement.getAttribute("data-theme")),[...document.querySelectorAll("select[data-choose-theme] [value='"+localStorage.getItem("theme")+"']")].forEach(u=>{u.selected=!0})})})}function a(i=!0){i===!0?document.addEventListener("DOMContentLoaded",function(u){t(),n(),s()}):(t(),n(),s())}r.exports={themeChange:a}})(me);var ht=me.exports;function dt(){return X.useEffect(()=>{ht.themeChange(!1)},[]),c.jsxs("nav",{className:"navbar bg-neutral text-neutral-content mb-3",children:[c.jsx("div",{className:"flex-1",children:c.jsx(D,{to:"/",className:"btn btn-ghost normal-case text-xl",children:"Microblogging"})}),c.jsxs("div",{className:"flex-none justify-between",children:[c.jsx("button",{type:"button",className:"btn btn-circle mr-6","data-toggle-theme":"forest,winter","data-act-class":"ACTIVECLASS","aria-label":"Dark Theme",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z"})})}),c.jsx("form",{className:"form-inline navbar-end",children:c.jsx(D,{to:"/posts/new",className:"btn btn-outline btn-primary",children:"New Post"})})]})]})}function gt({message:r}){return c.jsx("section",{className:"bg-green-200",children:r})}const j=new ft({trackingCallback:(r,e)=>{console.log({experimentId:r.key,variationId:e.variationId})}});function _t(){return X.useEffect(()=>{console.log("App version: 2.11.7"),fetch(`https://cdn.growthbook.io/api/features/${{}.VITE_GROWTH_BOOK_KEY}`).then(r=>r.json()).then(r=>{j.setFeatures(r.features)}),j.setAttributes({id:"foo",deviceId:"foo",company:"foo",loggedIn:!0,employee:!0,country:"foo",browser:"foo",url:"foo"})},[]),c.jsxs(_e,{growthbook:j,children:[c.jsx(dt,{}),c.jsx(gt,{message:""}),c.jsx(pe,{})]})}export{_t as default};
