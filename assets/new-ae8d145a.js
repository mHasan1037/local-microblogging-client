import{r as d,u as w,j as a}from"./index-acfe17ae.js";import{d as f}from"./db-363a45a4.js";import{I}from"./Input-ca2a491a.js";let r;const U=new Uint8Array(16);function S(){if(!r&&(r=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!r))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(U)}const n=[];for(let e=0;e<256;++e)n.push((e+256).toString(16).slice(1));function D(e,t=0){return(n[e[t+0]]+n[e[t+1]]+n[e[t+2]]+n[e[t+3]]+"-"+n[e[t+4]]+n[e[t+5]]+"-"+n[e[t+6]]+n[e[t+7]]+"-"+n[e[t+8]]+n[e[t+9]]+"-"+n[e[t+10]]+n[e[t+11]]+n[e[t+12]]+n[e[t+13]]+n[e[t+14]]+n[e[t+15]]).toLowerCase()}const R=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),x={randomUUID:R};function C(e,t,o){if(x.randomUUID&&!t&&!e)return x.randomUUID();e=e||{};const l=e.random||(e.rng||S)();if(l[6]=l[6]&15|64,l[8]=l[8]&63|128,t){o=o||0;for(let i=0;i<16;++i)t[o+i]=l[i];return t}return D(l)}function A(e){return Math.floor(Math.random()*e)}function V(){const[e,t]=d.useState(""),[o,l]=d.useState(""),[i,g]=d.useState(void 0),[u,m]=d.useState(""),[h,v]=d.useState(""),y=w();function j(s){const p=s.target.files[0],c=new FileReader;c.addEventListener("load",()=>{g(c.result)},!1),p&&c.readAsDataURL(p)}async function b(){try{const s=await f.posts.add({id:A(999999),heading:e,text:o,createdAt:Math.floor(Date.now()/1e3),userId:C(),image:i});m(`Post "${e}" successfully added. Got id ${s}`),y("/")}catch(s){m(`Failed to add ${e}: ${s}`)}}function N(s){s.preventDefault(),b()}return a.jsx("div",{className:"container mx-auto px-4",children:a.jsxs("div",{className:"grid grid-cols-12 gap-1 mb-3",children:[u&&a.jsx("h3",{children:u}),i&&a.jsx("div",{className:"col-span-12 md:col-span-10 lg:col-span-6",children:a.jsx("img",{id:"preview",src:i,alt:"Card cap",className:"card-img-top"})}),a.jsxs("div",{className:"col-span-12 md:col-span-8 lg:col-span-6",children:[a.jsx("h3",{className:"text-2xl mt-3 mb-5",children:"What's new?"}),a.jsxs("form",{onSubmit:N,children:[a.jsx("div",{className:"mb-3",children:a.jsx(I,{placeholder:"Title",value:e,onChange:s=>{t(s.target.value)}})}),a.jsx("div",{className:"mb-3",children:a.jsx("textarea",{placeholder:"Write your text...",rows:5,className:"textarea text-lg w-full",value:o,onChange:s=>{l(s.target.value)}})}),a.jsx("div",{className:"mb-3",children:a.jsx("textarea",{placeholder:"Hashtags",rows:2,className:"textarea text-lg w-full",value:h,onChange:s=>{v(s.target.value)}})}),a.jsx("div",{className:"input-group mb-3",children:a.jsx("input",{id:"uploadImageInput",type:"file",title:"Add image",className:`block w-full text-sm text-slate-500
                file:mr-4 file:py-2 file:px-4
                file:rounded-full file:border-0
                file:text-sm file:font-semibold
                file:bg-violet-50 file:text-slate-500
                hover:file:bg-violet-100 cursor-pointer mt-2`,onChange:j})}),a.jsx("div",{children:a.jsxs("button",{title:"Add new post",type:"submit",className:"btn btn-primary btn-outline mt-5",children:[a.jsx("i",{className:"glyphicon glyphicon-ok"}),"Post it"]})})]})]})]})})}export{V as default};
